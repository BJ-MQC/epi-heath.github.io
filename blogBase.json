{"singlePage": ["about"], "startSite": "07/03/2024", "filingNum": "\u4eacICP\u590720023628\u53f7", "onePageListNum": 15, "commentLabelColor": "#006b75", "yearColorList": ["#bc4c00", "#0969da", "#1f883d", "#A333D0"], "i18n": "CN", "themeMode": "manual", "dayTheme": "light", "nightTheme": "dark_colorblind", "urlMode": "pinyin", "script": "", "style": "", "head": "", "indexScript": "", "indexStyle": "", "bottomText": "\u8f6c\u8f7d\u8bf7\u6ce8\u660e\u51fa\u5904", "showPostSource": 1, "iconList": {"music": "M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13Z"}, "UTC": 8, "rssSplit": "sentence", "exlink": {"music": "https://music.meekdai.com"}, "needComment": 1, "allHead": "", "title": "\u8ba1\u7b97\u673a\u95ee\u9898\u5904\u7406\u5927\u5168", "subTitle": "\u89e3\u51b3\u8ba1\u7b97\u673a\u5404\u79cd\u7591\u96be\u6742\u75c7\uff0c\u6b22\u8fce\u60a8\u7684\u63d0\u95ee\uff0c\u7559\u8a00", "avatarUrl": "https://avatars.githubusercontent.com/u/138837727?s=96&v=4", "GMEEK_VERSION": "last", "displayTitle": "\u7535\u8111\u7ec8\u7ed3\u8005", "homeUrl": "https://blog.tech-computer.top/", "faviconUrl": "https://github.githubassets.com/favicons/favicon.svg", "email": "85821933@qq.com", "ogImage": "https://cdn.jsdelivr.net/gh/Meekdai/meekdai.github.io/logo64.jpg", "primerCSS": "<link href='https://mirrors.sustech.edu.cn/cdnjs/ajax/libs/Primer/21.0.7/primer.css' rel='stylesheet' />", "postListJson": {"P4": {"htmlDir": "docs/post/jiao-ni-xia-zai-guo-jia-biao-zhun-gong-wen-gong-kai-xi-tong-biao-zhun-pdf-wen-jian.html", "labels": ["documentation"], "postTitle": "\u6559\u4f60\u4e0b\u8f7d\u56fd\u5bb6\u6807\u51c6\u516c\u6587\u516c\u5f00\u7cfb\u7edf\u6807\u51c6pdf\u6587\u4ef6", "postUrl": "post/jiao-ni-xia-zai-guo-jia-biao-zhun-gong-wen-gong-kai-xi-tong-biao-zhun-pdf-wen-jian.html", "postSourceUrl": "https://github.com/BJ-MQC/tech-computer.github.io/issues/4", "commentNum": 0, "wordCount": 6454, "description": "# \u6559\u4f60\u4e0b\u8f7d\u56fd\u5bb6\u6807\u51c6\u516c\u6587\u516c\u5f00\u7cfb\u7edf\u6807\u51c6pdf\u6587\u4ef6\r\n## \u7b2c\u4e00\u6b65\uff1a\u4e0b\u8f7dchrome\u63d2\u4ef6 \u7be1\u6539\u7334\r\n\u4ece\u8c37\u6b4c\u5546\u5e97\u641c\u7d22\u201c\u7be1\u6539\u7334\u201d\u4e0b\u8f7d\r\n## \u7b2c\u4e8c\u6b65\uff1a\u521b\u5efa\u811a\u672c\uff0c\u811a\u672c\u5185\u5bb9\u5982\u4e0b\r\n```\r\n// ==UserScript==\r\n// @name         \u56fd\u6807\u4e0b\u8f7d\r\n// @namespace    http://tampermonkey.net/\r\n// @version      0.1\r\n// @description  try to take over the world!\r\n// @author       wcd\r\n// @match        http://c.gb688.cn/*\r\n// @icon         https://www.google.com/s2/favicons?sz=64&domain=gb688.cn\r\n// @grant        none\r\n// @require      https://code.jquery.com/jquery-3.6.0.min.js\r\n\r\n// ==/UserScript==\r\n\r\n(function() {\r\n    'use strict';\r\n$(function(){\r\n\r\n    $('head').append('<script src='https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js'></script>');\r\n\r\n    let my_script=`<script>\r\n\r\n            function px2Num(px) {\r\n                return Number(px.split('px')[0].toString());\r\n            }\r\n\r\n\r\n            function getPages(){\r\n                if( $('canvas[id^=canvas_]').length > 0 ) {\r\n                    $('canvas[id^=canvas_]').delete();\r\n\r\n                }\r\n                var baseurl = 'http://c.gb688.cn/bzgk/gb/';\r\n                var pagecount = $('div.page').length;\r\n                var pages = new Array(pagecount);\r\n                var pagebg = new Array(pagecount);\r\n                var title = $('title').text().split('|')[1].toString().trim();\r\n                var pheight = $('#0').css('height');\r\n                var pwidth = $('#0').css('width');\r\n\r\n                $('.page').each(function(i, elem) {\r\n                    if (elem.hasAttribute('bg')) {\r\n                        pagebg[i] = elem.getAttribute('bg');\r\n                    } else {\r\n                        pagebg[i] = $(elem).children('span').first().css('background-image').split(''')[\r\n                            1].split(/\\\\//).slice(-1)[0];\r\n                    }\r\n                });\r\n\r\n\r\n                //\u62fc\u5408\u56fe\u7247\r\n                $('.page').each(function(i, elem) {\r\n                    var canvasclone = $('canvas#canvas').clone();\r\n                    canvasclone.attr('id','canvas_'+i).css('background-color','#FFFFFFFF');\r\n                    $('#newimg').append(canvasclone);\r\n                    var canvas = document.getElementById('canvas_'+i);\r\n                    var ctx = canvas.getContext('2d');\r\n                    ctx.fillStyle='white';\r\n                    ctx.fillRect(0,0,px2Num(pwidth), px2Num(pheight));\r\n\r\n                    $('#imgContainer').append('<img id=img_' + i + ' src='' + baseurl+pagebg[i] + '' />')\r\n                    var image = document.getElementById('img_'+i);\r\n\r\n                    image.addEventListener('load', e => {\r\n                        $(elem).children('span').each(function(j,s){\r\n                             ctx.drawImage(image, -px2Num($(s).css('background-position-x')), -px2Num($(s).css('background-position-y')),  119, 168,\r\n                             $(s).attr('class').split('-')[1]*119, $(s).attr('class').split('-')[2]*168, 119, 168);\r\n                        });\r\n                    });\r\n\r\n                });\r\n            }\r\n\r\n            function isimgComplete(imgs){\r\n                //$('img[id^=img_]')\r\n                flag = true;\r\n                for(i=0;i<imgs.length;i++){\r\n                    flag=flag && imgs[i].complete;\r\n                }\r\n                return flag;\r\n            }\r\n\r\n            function downloadPDF(){\r\n                if( $('canvas[id^=canvas_]').length == 0 ) {\r\n                    alert('\u8bf7\u5148\u70b9\u51fb\u83b7\u53d6\u9875\u9762\uff01');\r\n                    return;\r\n                }\r\n\r\n                var images = $('img[id^=img_]');\r\n                //alert(isimgComplete(images));\r\n                if(!isimgComplete(images)){\r\n                    alert('\u9875\u9762\u5c1a\u672a\u63d0\u53d6\u5b8c\uff0c\u7a0d\u540e\u518d\u8bd5');\r\n                    return;\r\n                }\r\n\r\n                var pheight = $('#0').css('height');\r\n                var pwidth = $('#0').css('width');\r\n                const { jsPDF } = window.jspdf;\r\n                const pdf = new jsPDF('p','px',[px2Num(pwidth), px2Num(pheight)]);\r\n\r\n                var title = $('title').text().split('|')[1].toString().trim();\r\n\r\n                let [imgX, imgY] = [595.28, 841.89];\r\n                let imgHeight = imgX / (px2Num(pwidth) / px2Num(pheight));\r\n\r\n                $('canvas[id^=canvas_]').each(function(i,e){\r\n                    pdf.addImage(document.getElementById('canvas_'+i).toDataURL('image/jpeg'), 'jpeg', 0, 0, px2Num(pwidth), px2Num(pheight), '', 'MEDDIUM');\r\n                    //pdf.addImage(document.getElementById('canvas_'+i).toDataURL('image/png'), 'jpeg', 0, 0, imgX, imgHeight, '', 'SLOW');\r\n                    pdf.addPage();\r\n                });\r\n\r\n                let targetPage = pdf.internal.getNumberOfPages();\r\n                pdf.deletePage(targetPage); // \u5220\u9664\u6700\u540e\u4e00\u9875\r\n\r\n                pdf.save(title + '.pdf');\r\n            }\r\n\r\n             function downloadPDF0(){\r\n                while($('canvas[id^=canvas_]').length < $('.page').length){\r\n                    setTimeout(function(){\r\n\r\n                    },1000);\r\n                }\r\n             }\r\n\r\n\r\n        </script>`;\r\n\r\n    let source_img = `\r\n        <div id='canvas_container'>\r\n            <input type='button' value='\u83b7\u53d6\u9875\u9762' onclick='getPages()'/>\r\n            <input type='button' value='\u4e0b\u8f7dpdf' onclick='downloadPDF()'/>\r\n        </div>\r\n        <div id='imgContainer' style='display:none;'><img id='source' src=''></div>\r\n        <div id='newimg' width='1190px'></div>\r\n        <canvas id='canvas' width='1190px' height='1680px' style='display:none;'></canvas>`;\r\n\r\n    //let btn = `<input type='button' value='\u83b7\u53d6\u9875\u9762' onclick='getPages()'/>\r\n               //<input type='button' value='\u4e0b\u8f7dpdf' onclick='downloadPDF()'/>`;\r\n\r\n    let style = `\r\n        <style>\r\n            #canvas_container {\r\n                position: fixed;\r\n                height: 30px;\r\n                width: 150px;\r\n                top: 50px;\r\n                left: 10px;\r\n                border: 1px;\r\n                /*background-color: #00ff0099;*/\r\n                border-radius: 3px;\r\n            }\r\n        </style>\r\n    `;\r\n\r\n    $('head').append(style);\r\n    $('body').append(source_img);\r\n    $('body').append(my_script);\r\n    //$('body').append(btn);\r\n\r\n    //alert($('title').text());\r\n});\r\n\r\n})();\r\n\r\n```\r\n## \u7b2c\u4e09\u6b65\uff1a\u83b7\u53d6\u9875\u9762\r\n![image](https://github.com/BJ-MQC/tech-computer.github.io/assets/138837727/15fc5fe1-4ea0-4d89-b160-81e7be353d16)\r\n## \u7b2c\u56db\u6b65\uff1a\u4e0b\u8f7dpdf\r\n![image](https://github.com/BJ-MQC/tech-computer.github.io/assets/138837727/f03f3e84-121b-48de-bdbc-3e02edab786a)\r\n\u6210\u529f\u83b7\u53d6\uff01\uff01\r\n\u3002", "top": 0, "createdAt": 1719989404, "style": "", "script": "", "head": "", "ogImage": "https://cdn.jsdelivr.net/gh/Meekdai/meekdai.github.io/logo64.jpg", "createdDate": "2024-07-03", "dateLabelColor": "#bc4c00"}}, "singeListJson": {}, "labelColorDict": {"bug": "#d73a4a", "documentation": "#0075ca", "duplicate": "#cfd3d7", "enhancement": "#a2eeef", "good first issue": "#7057ff", "help wanted": "#008672", "invalid": "#e4e669", "question": "#d876e3", "wontfix": "#ffffff"}, "prevUrl": "disabled", "nextUrl": "disabled"}